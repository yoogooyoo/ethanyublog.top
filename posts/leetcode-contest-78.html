<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ethan Yu's Blog | LeetCode Contest 78</title>
  <meta name="description" content="LeetCode 周赛 - 78">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="LeetCode Contest 78">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/ethanyublog.top/posts/leetcode-contest-78">
  <meta property="og:description" content="LeetCode 周赛 - 78">
  <meta property="og:site_name" content="Ethan Yu's Blog">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="/ethanyublog.top/posts/leetcode-contest-78">
  <meta name="twitter:title" content="LeetCode Contest 78">
  <meta name="twitter:description" content="LeetCode 周赛 - 78">

  
    
      <meta property="og:image" content="/ethanyublog.top/assets/documentation/sample-image-0a264584b152aa8d86f61525d05ae1131787d0a1029aa1cb7e3e4148b5d34755.jpg">
      <meta name="twitter:image" content="/ethanyublog.top/assets/documentation/sample-image-0a264584b152aa8d86f61525d05ae1131787d0a1029aa1cb7e3e4148b5d34755.jpg">
    
  

  <link href="/ethanyublog.top/feed.xml" type="application/rss+xml" rel="alternate" title="Ethan Yu's Blog Last 10 blog posts" />

  

  
    <link rel="icon" type="image/x-icon" href="/ethanyublog.top/assets/favicon-light-a98c41efc5ed9fcc06ac664c9e2f7a9b3c3b2e0a52357d221fe382f6f4abc8fc.ico">
    <link rel="apple-touch-icon" href="/ethanyublog.top/assets/apple-touch-icon-light-87d1f2a3a19b1500e5c1626a0492025ca5f7f97d24540dc5900288e92112925a.png">
    <link rel="stylesheet" type="text/css" href="/ethanyublog.top/assets/light-d58c19abf06dc3cc3a6c400051a5c3db48584a5b62501c488e46bb346b7acb73.css">
  
</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav scrollappear">
  <a href="/ethanyublog.top/" class="header-logo" title="Ethan Yu's Blog">Ethan Yu's Blog</a>
  <ul class="header-links">
    
      <li>
        <a href="/ethanyublog.top" title="Homepage">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-homepage">
  <use href="/ethanyublog.top/assets/homepage-d332ee44269713efddee9cd99d7f7589af3f7344adba09a187fa011647072e7a.svg#icon-homepage" xlink:href="/ethanyublog.top/assets/homepage-d332ee44269713efddee9cd99d7f7589af3f7344adba09a187fa011647072e7a.svg#icon-homepage"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="/ethanyublog.top/about" title="About me">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-about">
  <use href="/ethanyublog.top/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about" xlink:href="/ethanyublog.top/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="https://github.com/yoogooyoo" rel="noreferrer noopener" target="_blank" title="GitHub">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-github">
  <use href="/ethanyublog.top/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github" xlink:href="/ethanyublog.top/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="https://www.linkedin.com/in/guo-ethan-yu-a0b1a188" rel="noreferrer noopener" target="_blank" title="LinkedIn">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-linkedin">
  <use href="/ethanyublog.top/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin" xlink:href="/ethanyublog.top/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="mailto:ethanyu0319@gmail.com# Add your Email address" title="Email">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-email">
  <use href="/ethanyublog.top/assets/email-782473193bf750036fdb90e8daa075508a20509d01854c09f3237c144a3f0601.svg#icon-email" xlink:href="/ethanyublog.top/assets/email-782473193bf750036fdb90e8daa075508a20509d01854c09f3237c144a3f0601.svg#icon-email"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="/ethanyublog.top/feed.xml" rel="noreferrer noopener" target="_blank" title="RSS">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-rss">
  <use href="/ethanyublog.top/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss" xlink:href="/ethanyublog.top/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss"></use>
</svg>

        </a>
      </li>
    
  </ul>
</nav>

        <article class="article scrollappear">
          <header class="article-header">
            <h1>LeetCode Contest 78</h1>
            <p>LeetCode 周赛 - 78</p>
            <div class="article-list-footer">
              <span class="article-list-date">
                April 1, 2018
              </span>
              <span class="article-list-divider">-</span>
              <span class="article-list-minutes">
                
                
                  3 minute read
                
              </span>
              <span class="article-list-divider">-</span>
              <div class="article-list-tags">
                
                  <a href="/ethanyublog.top/tag/LeetCode">LeetCode</a>
                
                  <a href="/ethanyublog.top/tag/Dynamic-Programming">Dynamic-Programming</a>
                
              </div>
            </div>
          </header>

          <div class="article-content">
            <h4 id="soup-serving"><strong>Soup Serving</strong></h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> There are two types of soup: type A and type B. Initially we have N ml of each type of soup. There are four kinds of operations:
 - Serve 100 ml of soup A and 0 ml of soup B
 - Serve 75 ml of soup A and 25 ml of soup B
 - Serve 50 ml of soup A and 50 ml of soup B
 - Serve 25 ml of soup A and 75 ml of soup B  
When we serve some soup, we give it to someone and we no longer have it.  Each turn, we will choose from the four operations with *equal probability 0.25*. If the remaining volume of soup is not enough to complete the operation, we will serve as much as we can.  We stop once we no longer have some quantity of both types of soup.   
Note that we do not have the operation where all 100 ml's of soup B are used first.  
Return the probability that soup A will be empty first, plus half the probability that A and B become empty at the same time.  
Notes:  
0 &lt;= N &lt;= 10^9.   
Answers within 10^-6 of the true value will be accepted as correct.
</code></pre></div></div>

<p>题目要求A汤先用光的概率加上一半的A，B汤同时用光的概率。每一次有四种选择，A，B汤初始的量也是相同的，
第一步可以简化问题，基本单位是25ml，所以我们可以把Nml简化为 （N+24)/25 个单位，这样四个选择就变成 （A-4， B），（A-3， B-1），（A-2，B-2），（A-1，B-3）。
接下来就是DP来解了，但是因为N可能很大，所以naive DP肯定无法满足要求。<br />
if N == 4800, the result = 0.999994994426<br />
if N == 4801, the result = 0.0.999995382315
需要注意的一点是，因为误差范围小于10^-6就可以，所以当N &gt; 4800 时，概率就无限接近于1了。（证明待加）</p>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">double</span> <span class="n">memo</span><span class="p">[</span><span class="mi">200</span><span class="p">][</span><span class="mi">200</span><span class="p">];</span>
<span class="kt">double</span> <span class="nf">soupServings</span><span class="p">(</span><span class="kt">int</span> <span class="n">N</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">N</span> <span class="o">&gt;=</span> <span class="mi">4800</span> <span class="o">?</span> <span class="mf">1.0</span> <span class="o">:</span> <span class="n">helper</span><span class="p">((</span><span class="n">N</span><span class="o">+</span><span class="mi">24</span><span class="p">)</span><span class="o">/</span><span class="mi">25</span><span class="p">,</span> <span class="p">(</span><span class="n">N</span><span class="o">+</span><span class="mi">24</span><span class="p">)</span><span class="o">/</span><span class="mi">25</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="nf">helper</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">a</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mf">0.5</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">a</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">b</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">memo</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">];</span>
    <span class="n">memo</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.25</span> <span class="o">*</span> <span class="p">(</span> <span class="n">helper</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">+</span> <span class="n">helper</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">helper</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="n">b</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">helper</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">-</span><span class="mi">3</span><span class="p">));</span>
    <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">];</span>
<span class="p">}</span></code></pre></figure>

<hr />

<h4 id="chalkboard-xor-game"><strong>Chalkboard XOR Game</strong></h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>We are given non-negative integers nums[i] which are written on a chalkboard.  Alice and Bob take turns erasing exactly one
number from the chalkboard, with Alice starting first.  If erasing a number causes the bitwise XOR of all the elements of the
chalkboard to become 0, then that player loses.  (Also, we'll say the bitwise XOR of one element is that element itself, and the
bitwise XOR of no elements is 0.)  
Also, if any player starts their turn with the bitwise XOR of all the elements of the chalkboard equal to 0, then that player wins.  

 Return True if and only if Alice wins the game, assuming both players play optimally.   

Notes:  
 1 &lt;= N &lt;= 1000
 0 &lt;= nums[i] &lt;= 2^16
</code></pre></div></div>

<p>分析： 这道题难点在于仔细分析题意，alice先手拿走一个数（随意选择），如果剩下的数做异或运算后结果为0，那么alice输了。</p>

<p>也就是说：</p>

<ul>
  <li>
    <p>在取数之前，如果数组中剩下的所有元素异或运算结果为0，则当前选手获胜。</p>
  </li>
  <li>
    <p>如果数组元素个数为偶数，且每个选手取完数后异或操作得到的结果不为0，则因为最后一个数的取数操作不是alice，所以alice能获胜。</p>
  </li>
</ul>

<p>考虑元素个数为偶数，start condition是XOR ！= 0，这意味着至少有两个数是不一样的，（如果所有数一样，则异或得到的结果为0）所以alice每一次的取数只要和当前的XOR不一样就能保证取完数不为0，所以最后一定能获胜。</p>

<p>元素个数为奇数，则第二个取数的Bob面对的是偶数个数的数组，所以alice必输。</p>

<p>这其实是一道数学题，需要仔细分析他的逻辑。</p>

<p>代码如下：</p>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">bool</span> <span class="nf">xorGame</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">xor</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">:</span> <span class="n">nums</span><span class="p">)</span> <span class="n">xor</span> <span class="o">^=</span> <span class="n">i</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">xor</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>


          </div>
          <div class="article-share">
            
            
            <a href="https://twitter.com/home?status=LeetCode+Contest+78%20-%20/ethanyublog.top/posts/leetcode-contest-78" title="Share on Twitter" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6 -18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6 0.8 15 2.5 22.1 -80.5-4-151.9-42.6-199.6-101.3 -8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7C67 210.7 52 206.3 39 199c0 0.4 0 0.8 0 1.2 0 47 33.4 86.1 77.7 95 -8.1 2.2-16.7 3.4-25.5 3.4 -6.2 0-12.3-0.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3 -33.1 26-74.9 41.5-120.3 41.5 -7.8 0-15.5-0.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-0.1-8.4-0.3-12.5C462.6 146 479 129 492 109.5z"/></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=/ethanyublog.top/posts/leetcode-contest-78" title="Share on Facebook" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M288 192v-38.1c0-17.2 3.8-25.9 30.5-25.9H352V64h-55.9c-68.5 0-91.1 31.4-91.1 85.3V192h-45v64h45v192h83V256h56.4l7.6-64H288z"/></svg>
            </a>
            <a href="https://plus.google.com/share?url=/ethanyublog.top/posts/leetcode-contest-78" title="Share on Google+" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 128 128"><path d="M40.7 55.9v16.1c0 0 15.6 0 22 0C59.2 82.5 53.8 88.2 40.7 88.2c-13.3 0-23.7-10.8-23.7-24.2s10.4-24.2 23.7-24.2c7.1 0 11.6 2.5 15.8 5.9 3.3-3.3 3.1-3.8 11.6-11.9 -7.2-6.6-16.8-10.6-27.4-10.6C18.2 23.3 0 41.5 0 64c0 22.5 18.2 40.7 40.7 40.7 33.6 0 41.8-29.3 39-48.8H40.7zM113.9 56.7V42.6h-10.1v14.1H89.4v10.1h14.5v14.5h10.1V66.8H128V56.7H113.9z"/></svg>
            </a>
          </div>

          
        </article>
        <footer class="footer scrollappear">
  <p>
    本站记录个人的技术学习提升之旅
    Site powered by Jekyll & Github Pages. Chalk theme designed by <a href="https://github.com/nielsenramon/chalk" rel="noreferrer noopener" target="_blank" title="Download Chalk">ielsenramon</a>.
  </p>
</footer>

      </div>
    </div>
  </main>
  

<script type="text/javascript" src="/ethanyublog.top/assets/vendor-3055aff9344d5fd0b8f6b706528e7c7ef0efafabb8c3b423e21d3d36a0178a44.js"></script>


  <script type="text/javascript" src="/ethanyublog.top/assets/webfonts-e3010885de8c083c4b2935d463b1649e8796191a66a1b43bb87ef04bbcce420d.js"></script>



  <script type="text/javascript" src="/ethanyublog.top/assets/scrollappear-e2da8ea567e418637e31266cc5302126eaa79f62a2273739086358b589a89ee6.js"></script>


<script type="text/javascript" src="/ethanyublog.top/assets/application-cd43a7f9bd8a08997bb19229cd040e7129ede0a1adf77c693b5835c9f8c2a4b1.js"></script>

</body>
</html>
